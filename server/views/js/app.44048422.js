(function(){"use strict";var e={5250:function(e,n,t){var a=t(9242),o=t(1020),s=t(3396),l=t(7139);const r={class:"navbar navbar-expand-md bg-body-tertiary"},i={class:"container-fluid"},u=(0,s._)("span",{class:"navbar-toggler-icon"},null,-1),d=[u],c={class:"navbar-nav mx-auto"};function m(e,n,t,a,o,u){const m=(0,s.up)("router-link"),h=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("nav",r,[(0,s._)("div",i,[(0,s.Wm)(m,{onClick:a.closeNavbar,to:"/",class:"navbar-brand"},{default:(0,s.w5)((()=>[(0,s.Uk)("FundMosque")])),_:1},8,["onClick"]),a.user.isLoggedIn?((0,s.wg)(),(0,s.j4)(m,{key:0,onClick:e.logout,class:"nav-item nav-link",to:"/logout"},{default:(0,s.w5)((()=>[(0,s.Uk)("Logout")])),_:1},8,["onClick"])):(0,s.kq)("",!0),(0,s._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",onClick:n[0]||(n[0]=(...e)=>a.toggleNavbar&&a.toggleNavbar(...e))},d),(0,s._)("div",{class:(0,l.C_)(["collapse navbar-collapse",{show:a.isNavbarOpen}]),id:"navbarSupportedContent"},[(0,s._)("div",c,[a.user.isLoggedIn?((0,s.wg)(),(0,s.j4)(m,{key:0,onClick:a.closeNavbar,class:"nav-item nav-link",to:"/makeDonation"},{default:(0,s.w5)((()=>[(0,s.Uk)("Make a Donation")])),_:1},8,["onClick"])):(0,s.kq)("",!0),a.user.isLoggedIn?((0,s.wg)(),(0,s.j4)(m,{key:1,onClick:a.closeNavbar,class:"nav-item nav-link",to:"/profile"},{default:(0,s.w5)((()=>[(0,s.Uk)("View Profile")])),_:1},8,["onClick"])):(0,s.kq)("",!0),a.user.isLoggedIn?((0,s.wg)(),(0,s.j4)(m,{key:2,onClick:a.closeNavbar,class:"nav-item nav-link",to:"/mosquesInfo"},{default:(0,s.w5)((()=>[(0,s.Uk)("View Mosques")])),_:1},8,["onClick"])):(0,s.kq)("",!0),a.user.isLoggedIn?((0,s.wg)(),(0,s.j4)(m,{key:3,onClick:a.closeNavbar,class:"nav-item nav-link",to:"/campaigns"},{default:(0,s.w5)((()=>[(0,s.Uk)("View Campaigns")])),_:1},8,["onClick"])):(0,s.kq)("",!0),a.user.isLoggedIn?((0,s.wg)(),(0,s.j4)(m,{key:4,onClick:a.closeNavbar,class:"nav-item nav-link",to:"/announcements"},{default:(0,s.w5)((()=>[(0,s.Uk)("View Announcements")])),_:1},8,["onClick"])):(0,s.kq)("",!0),a.user.isLoggedIn&&a.user.isAdmin?((0,s.wg)(),(0,s.j4)(m,{key:5,onClick:a.closeNavbar,class:"nav-item nav-link",to:"/adminDashboard"},{default:(0,s.w5)((()=>[(0,s.Uk)("Admin Dashboard")])),_:1},8,["onClick"])):(0,s.kq)("",!0),a.user.isLoggedIn?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(m,{key:6,class:"nav-item nav-link",to:"/register",onClick:a.closeNavbar},{default:(0,s.w5)((()=>[(0,s.Uk)("Register")])),_:1},8,["onClick"])),a.user.isLoggedIn?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(m,{key:7,class:"nav-item nav-link",to:"login",onClick:a.closeNavbar},{default:(0,s.w5)((()=>[(0,s.Uk)("Login")])),_:1},8,["onClick"]))]),(0,s._)("button",{class:"btn btn-secondary",id:"darkModeButton",onClick:n[1]||(n[1]=(...e)=>a.toggleTheme&&a.toggleTheme(...e))},(0,l.zw)("dark"===a.theme?"Light Mode":"Dark Mode"),1)],2)])]),(0,s.Wm)(h)],64)}var h=t(4870),p=(t(560),t(2483));const g={key:0},b=(0,s._)("p",null,[(0,s.Uk)(" Fill in the form below to make a donation "),(0,s._)("br"),(0,s.Uk)(" We thank you for your generosity! "),(0,s._)("br"),(0,s.Uk)("To change the mosque you wish to donate to, edit your profle. ")],-1),_={class:"mb-3"},f=(0,s._)("label",{for:"amount"},"Amount",-1),w={class:"mb-3"},y=(0,s._)("label",{for:"campaign"},"Campaign",-1),v=(0,s._)("option",{value:"",selected:""},"None",-1),D=["value"],k=(0,s._)("button",{type:"submit",class:"btn btn-primary"},"Submit",-1),q={key:1},C=(0,s._)("h1",null,"Uh Oh!",-1),M=(0,s._)("p",null,"You don't have a chosen mosque!",-1),U=(0,s._)("p",null,"Go and select a chosen mosque from the profile page.",-1),I=[C,M,U];function S(e,n,t,o,r,i){return null!=o.user.chosenMosqueName?((0,s.wg)(),(0,s.iD)("div",g,[(0,s._)("h1",null,"Donate to "+(0,l.zw)(o.user.chosenMosqueName),1),b,(0,s._)("form",{onSubmit:n[2]||(n[2]=(0,a.iM)((e=>i.redirectToCheckout()),["prevent"])),method:"POST"},[(0,s._)("div",_,[f,(0,s.wy)((0,s._)("input",{type:"number",class:"form-control",id:"amount",name:"amount","aria-describedby":"amount","onUpdate:modelValue":n[0]||(n[0]=e=>r.amount=e),placeholder:"Enter Amount in Â£ here",required:""},null,512),[[a.nr,r.amount]])]),(0,s._)("div",w,[y,(0,s.wy)((0,s._)("select",{class:"form-select",id:"campaign",name:"campaign","onUpdate:modelValue":n[1]||(n[1]=e=>r.selectedCampaign=e)},[v,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.campaigns,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e._id,value:e._id},(0,l.zw)(e.name),9,D)))),128))],512),[[a.bM,r.selectedCampaign]])]),k],32)])):((0,s.wg)(),(0,s.iD)("div",q,I))}t(8858),t(1318),t(3228);var A={name:"DonationForm",setup(){const e=Xo();return{user:e}},data(){return{amount:"",donor:"",mosque:"",campaigns:[],selectedCampaign:null}},created(){fetch(`/api/campaigns/${this.user.chosenMosqueId}`).then((e=>{if(e.ok)return e.json();throw new Error(e.status)})).then((e=>this.campaigns=e)).catch((()=>console.log("Error")));const e=new URLSearchParams(window.location.search);e.get("success")&&(this.amount=this.$route.query.amount,"null"===this.$route.query.campaign?this.selectedCampaign=null:this.selectedCampaign=this.$route.query.campaign,this.submitDonation()),e.get("canceled")&&alert("Donation canceled.")},methods:{redirectToCheckout(){fetch("/api/donations/pay/checkout",{method:"POST",body:JSON.stringify({amount:this.amount,campaign:this.selectedCampaign}),headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{window.location.href=e.url})).catch((e=>{console.error("Error:",e)}))},submitDonation(){let e=[];e=""===this.selectedCampaign?{amount:this.amount,donor:this.user._id,mosque:this.user.chosenMosqueId}:{amount:this.amount,donor:this.user._id,mosque:this.user.chosenMosqueId,campaign:this.selectedCampaign},""==this.amount?alert("Please enter an amount"):fetch("/api/donations",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(e)}).then((e=>{if(e.ok)return e.json();throw new Error(e.status)})).then((e=>{e.success&&(alert("Donation successful"),Bo.push("/"))})).catch((e=>{console.error(e),alert("Donation failed")}))}}},L=t(89);const j=(0,L.Z)(A,[["render",S]]);var z=j;const N={class:"home"},E=(0,s._)("h1",null,"Welcome to FundMosque!",-1),O={key:0},x={class:"logout"},T={key:0},P={key:0};function R(e,n,t,a,o,r){const i=(0,s.up)("DonationList");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",N,[E,a.user.isLoggedIn?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",O,"Please sign up or log in to continue."))]),(0,s._)("div",null,[(0,s._)("div",x,[a.user.isLoggedIn?((0,s.wg)(),(0,s.iD)("p",T,"You are logged in as "+(0,l.zw)(a.user.username),1)):(0,s.kq)("",!0)])]),a.user.isLoggedIn?((0,s.wg)(),(0,s.iD)("div",P,[(0,s.Wm)(i)])):(0,s.kq)("",!0)],64)}const V=e=>((0,s.dD)("data-v-5f2adee5"),e=e(),(0,s.Cn)(),e),$={class:"donation-list"},Y=V((()=>(0,s._)("h1",null,"Recent Donations",-1))),H={class:"table"},F=V((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"Amount"),(0,s._)("th",null,"Donor"),(0,s._)("th",null,"Mosque"),(0,s._)("th",null,"Campaign")])],-1)));function Z(e,n,t,a,o,r){return(0,s.wg)(),(0,s.iD)("div",$,[Y,(0,s._)("table",H,[F,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.donations,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e._id},[(0,s._)("td",null,(0,l.zw)(e.amount),1),(0,s._)("td",null,(0,l.zw)(e.donor.name),1),(0,s._)("td",null,(0,l.zw)(e.mosque.name),1),(0,s._)("td",null,(0,l.zw)(e.campaign?.name||"No Campaign"),1)])))),128))])])])}var K={name:"DonationList",data(){return{donations:[]}},created(){fetch("/api/donations").then((e=>{if(e.ok)return e.json();throw new Error(e.status)})).then((e=>{this.donations=e,this.donations.reverse(),this.donations=this.donations.slice(0,3)})).catch((e=>{console.error(e)}))}};const G=(0,L.Z)(K,[["render",Z],["__scopeId","data-v-5f2adee5"]]);var J=G,W={name:"HomePage",components:{DonationList:J},setup(){const e=Xo();return{user:e}}};const B=(0,L.Z)(W,[["render",R]]);var Q=B;const X=(0,s._)("h1",null,"Register",-1),ee={class:"mb-3"},ne=(0,s._)("label",{for:"username",class:"form-label"},"Username",-1),te={class:"mb-3"},ae=(0,s._)("label",{for:"name",class:"form-label"},"Full Name",-1),oe={class:"mb-3"},se=(0,s._)("label",{for:"email",class:"form-label"},"Email address",-1),le={class:"mb-3"},re=(0,s._)("label",{for:"password",class:"form-label"},"Password",-1),ie={class:"mb-3"},ue=(0,s._)("label",{for:"chosenMosqueId"},"Choose your preferred Mosque",-1),de=(0,s._)("option",{value:"",disabled:"",selected:""}," Click here to select a mosque ",-1),ce=["value"],me={class:"mb-3"},he=(0,s._)("label",{for:"isAdmin",class:"form-label"},"Are you an admin?",-1),pe={key:0,class:"mb-3"},ge=(0,s._)("label",{for:"adminPasscode",class:"form-label"},"Admin Passcode",-1),be=(0,s._)("button",{class:"btn btn-primary",type:"submit"},"Register",-1);function _e(e,n,t,o,r,i){return(0,s.wg)(),(0,s.iD)(s.HY,null,[X,(0,s._)("form",{onSubmit:n[7]||(n[7]=(0,a.iM)(((...e)=>i.register&&i.register(...e)),["prevent"])),class:"register-form"},[(0,s._)("div",ee,[ne,(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":n[0]||(n[0]=e=>r.username=e),type:"text",required:""},null,512),[[a.nr,r.username]])]),(0,s._)("div",te,[ae,(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":n[1]||(n[1]=e=>r.name=e),type:"text",required:""},null,512),[[a.nr,r.name]])]),(0,s._)("div",oe,[se,(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":n[2]||(n[2]=e=>r.email=e),type:"email",required:""},null,512),[[a.nr,r.email]])]),(0,s._)("div",le,[re,(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":n[3]||(n[3]=e=>r.password=e),type:"password",required:""},null,512),[[a.nr,r.password]])]),(0,s._)("div",ie,[ue,(0,s.wy)((0,s._)("select",{id:"chosenMosqueId",name:"chosenMosqueId","onUpdate:modelValue":n[4]||(n[4]=e=>r.chosenMosqueId=e),class:"form-control",required:""},[de,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.mosques,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e._id,value:e._id},(0,l.zw)(e.name),9,ce)))),128))],512),[[a.bM,r.chosenMosqueId]])]),(0,s._)("div",me,[he,(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":n[5]||(n[5]=e=>r.isAdmin=e)},null,512),[[a.e8,r.isAdmin]])]),r.isAdmin?((0,s.wg)(),(0,s.iD)("div",pe,[ge,(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":n[6]||(n[6]=e=>r.adminPasscode=e),type:"password",required:""},null,512),[[a.nr,r.adminPasscode]])])):(0,s.kq)("",!0),be],32)],64)}var fe={data(){return{username:"",name:"",email:"",password:"",isAdmin:!1,adminPasscode:"",chosenMosqueId:"",mosques:[]}},created(){fetch("/api/mosques").then((e=>{if(e.ok)return e.json();throw new Error(e.status)})).then((e=>{this.mosques=e})).catch((e=>{console.error(e)}))},methods:{async register(){const e=Xo();let n={username:this.username,name:this.name,email:this.email,password:this.password,isAdmin:this.isAdmin,adminPasscode:this.adminPasscode,chosenMosqueId:this.chosenMosqueId};try{const t=await fetch("/api/register",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),a=await t.json();a.success?(await e.loggedIn(),Bo.push("/"),alert("Registration successful")):alert("uh oh, try again!")}catch(t){console.log(t),alert("Registration failed")}}}};const we=(0,L.Z)(fe,[["render",_e]]);var ye=we;const ve={class:"login"},De=(0,s._)("h1",null,"Login",-1),ke={class:"mb-3"},qe=(0,s._)("label",{class:"form-label",for:"username"},"Username",-1),Ce={class:"mb-3"},Me=(0,s._)("label",{class:"form-label",for:"password"},"Password",-1),Ue=(0,s._)("button",{class:"btn btn-primary",type:"submit"},"Login",-1),Ie=(0,s._)("a",{class:"btn btn-secondary",href:"/api/google"},"Click here to sign in with Google",-1);function Se(e,n,t,o,l,r){return(0,s.wg)(),(0,s.iD)("div",ve,[De,(0,s._)("form",{onSubmit:n[2]||(n[2]=(0,a.iM)(((...e)=>r.login&&r.login(...e)),["prevent"])),class:"login-form"},[(0,s._)("div",ke,[qe,(0,s.wy)((0,s._)("input",{id:"username",class:"form-control",type:"text","onUpdate:modelValue":n[0]||(n[0]=e=>o.userStore.username=e),required:""},null,512),[[a.nr,o.userStore.username]])]),(0,s._)("div",Ce,[Me,(0,s.wy)((0,s._)("input",{id:"password",class:"form-control",type:"password","onUpdate:modelValue":n[1]||(n[1]=e=>o.userStore.password=e),required:""},null,512),[[a.nr,o.userStore.password]])]),Ue],32),Ie])}var Ae={name:"LoginPage",setup(){const e=Xo();return{userStore:e}},methods:{login(){this.userStore.login(),this.userStore.username="",this.userStore.password=""}}};const Le=(0,L.Z)(Ae,[["render",Se]]);var je=Le;const ze=(0,s._)("h1",null,"Profile",-1),Ne=(0,s._)("p",null,[(0,s.Uk)(" Below are the details stored by FundMosque for this account. "),(0,s._)("br"),(0,s.Uk)(" Click the update button to update your details ")],-1),Ee=(0,s._)("button",{class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Update ",-1),Oe=(0,s._)("h2",null,"Your donation history",-1),xe={key:0,class:"donation-table"},Te={class:"table"},Pe=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"Amount"),(0,s._)("th",null,"Mosque"),(0,s._)("th",null,"Campaign")])],-1),Re={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Ve={class:"modal-dialog"},$e={class:"modal-content"},Ye=(0,s._)("div",{class:"modal-header"},[(0,s._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Update user information "),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),He={class:"modal-body"},Fe={class:"mb-3"},Ze=(0,s._)("label",{for:"username",class:"form-label"},"Username (cannot be changed)",-1),Ke={class:"mb-3"},Ge=(0,s._)("label",{for:"name",class:"form-label"},"Full Name",-1),Je={class:"mb-3"},We=(0,s._)("label",{for:"email",class:"form-label"},"Email address",-1),Be={class:"mb-3"},Qe=(0,s._)("label",{for:"chosenMosqueId"},"Choose your preferred Mosque",-1),Xe=(0,s._)("option",{value:"",disabled:"",selected:""}," Click here to select a mosque ",-1),en=["value"],nn=(0,s._)("button",{class:"btn btn-primary",type:"submit"},"Update",-1);function tn(e,n,t,o,r,i){return(0,s.wg)(),(0,s.iD)(s.HY,null,[ze,Ne,(0,s._)("h5",null,"Name: "+(0,l.zw)(o.user.name),1),(0,s._)("h5",null,"Username: "+(0,l.zw)(o.user.username),1),(0,s._)("h5",null,"Email: "+(0,l.zw)(o.user.email),1),(0,s._)("h5",null,"Chosen Mosque: "+(0,l.zw)(o.user.chosenMosqueName),1),Ee,Oe,r.donations.length>0?((0,s.wg)(),(0,s.iD)("div",xe,[(0,s._)("table",Te,[Pe,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.donations,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e._id},[(0,s._)("td",null,(0,l.zw)(e.amount),1),(0,s._)("td",null,(0,l.zw)(e.mosque.name),1),(0,s._)("td",null,(0,l.zw)(e.campaign?.name||"No Campaign"),1)])))),128))])])])):(0,s.kq)("",!0),(0,s._)("div",Re,[(0,s._)("div",Ve,[(0,s._)("div",$e,[Ye,(0,s._)("div",He,[(0,s._)("form",{onSubmit:n[4]||(n[4]=(0,a.iM)((e=>i.update(o.user._id)),["prevent"])),class:"register-form"},[(0,s._)("div",Fe,[Ze,(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":n[0]||(n[0]=e=>o.user.username=e),type:"text",disabled:"",required:""},null,512),[[a.nr,o.user.username]])]),(0,s._)("div",Ke,[Ge,(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":n[1]||(n[1]=e=>o.user.name=e),type:"text",required:""},null,512),[[a.nr,o.user.name]])]),(0,s._)("div",Je,[We,(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":n[2]||(n[2]=e=>o.user.email=e),type:"email",required:""},null,512),[[a.nr,o.user.email]])]),(0,s._)("div",Be,[Qe,(0,s.wy)((0,s._)("select",{id:"chosenMosqueId",name:"chosenMosqueId","onUpdate:modelValue":n[3]||(n[3]=e=>o.user.chosenMosqueId=e),class:"form-control",required:""},[Xe,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.mosques,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e._id,value:e._id},(0,l.zw)(e.name),9,en)))),128))],512),[[a.bM,o.user.chosenMosqueId]])]),nn],32)])])])])],64)}var an={name:"ProfilePage",setup(){const e=Xo();return{user:e}},data(){return{mosques:[],donations:[]}},created(){fetch("/api/mosques").then((e=>{if(e.ok)return e.json();throw new Error(e.status)})).then((e=>{this.mosques=e})).catch((e=>{console.error(e)})),fetch(`/api/userDonations/${this.user._id}`).then((e=>{if(e.ok)return e.json()})).then((e=>{this.donations=e}))},methods:{async update(e){let n={_id:this.user._id,username:this.user.username,name:this.user.name,email:this.user.email,isAdmin:this.user.isAdmin,chosenMosqueId:this.user.chosenMosqueId};await fetch(`/api/users/${e}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({updatedUser:n})}).then((e=>{if(!e.ok)throw e;return e.json()})).then((e=>{e.success?(alert("User updated successfully!"),document.querySelector(".btn-close").click(),this.user.loggedIn(),this.$router.push("/")):(alert(e.message),this.user.loggedIn(),this.$router.push("/"))})).catch((e=>{alert(`uh oh, theres a problem\n${e.status}: ${e.message}`)}))}}};const on=(0,L.Z)(an,[["render",tn]]);var sn=on;const ln={class:"mosque-list"},rn=(0,s._)("h1",null,"Mosques",-1),un=(0,s._)("p",null,[(0,s.Uk)(" Below are the mosques registered with FundMosque."),(0,s._)("br"),(0,s.Uk)(" Click More Info to find out more ")],-1),dn={class:"mosques-table"},cn={class:"table"},mn=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"Mosque Name"),(0,s._)("th",null,"Mosque Address"),(0,s._)("th",null,"Action")])],-1),hn=["onClick"],pn={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},gn={class:"modal-dialog modal-dialog-scrollable"},bn={class:"modal-content"},_n=(0,s._)("div",{class:"modal-header"},[(0,s._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," More information about: "),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),fn={class:"modal-body"},wn={class:"table"},yn=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"Amount"),(0,s._)("th",null,"Donor")])],-1),vn=(0,s._)("div",{class:"modal-footer"},[(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ")],-1);function Dn(e,n,t,a,o,r){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",ln,[rn,un,(0,s._)("div",dn,[(0,s._)("table",cn,[mn,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.mosques,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e._id},[(0,s._)("td",null,(0,l.zw)(e.name),1),(0,s._)("td",null,(0,l.zw)(e.address),1),(0,s._)("td",null,[(0,s._)("button",{class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#exampleModal",onClick:n=>r.mosqueMoreInfo(e._id,e.name)}," More Info ",8,hn)])])))),128))])])])]),(0,s._)("div",pn,[(0,s._)("div",gn,[(0,s._)("div",bn,[_n,(0,s._)("div",fn,[(0,s._)("h2",null,(0,l.zw)(this.selectedMosque),1),(0,s._)("p",null," The total donations since joining FundMosque for "+(0,l.zw)(o.selectedMosque)+" is: Â£"+(0,l.zw)(o.totalMosqueDonations)+"! ",1),(0,s._)("table",wn,[yn,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.mosqueDonations,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e._id},[(0,s._)("td",null,(0,l.zw)(e.amount),1),(0,s._)("td",null,(0,l.zw)(e.donor.name),1)])))),128))])])]),vn])])])],64)}var kn={name:"MosquesPage",data(){return{mosques:[],selectedMosque:"",mosqueDonations:[],totalMosqueDonations:0}},mounted(){fetch("/api/mosques/").then((e=>{if(e.ok)return e.json();throw new Error(e.status)})).then((e=>{this.mosques=e})).catch((e=>{console.error(e)}))},methods:{mosqueMoreInfo(e,n){this.selectedMosque=n,fetch(`/api/mosqueAllDonations/${e}`).then((e=>{if(e.ok)return e.json();throw new Error(e.status)})).then((e=>{this.mosqueDonations=e,this.totalMosqueDonations=0;for(let n=0;n<this.mosqueDonations.length;n++)this.totalMosqueDonations+=this.mosqueDonations[n].amount})).catch((e=>{console.error(e)}))}}};const qn=(0,L.Z)(kn,[["render",Dn]]);var Cn=qn;const Mn={class:"users-table"},Un=(0,s._)("h1",null,"Admin Dashboard",-1),In=(0,s._)("h2",null,"Users",-1),Sn={class:"table-responsive"},An={class:"table"},Ln=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"ID"),(0,s._)("th",null,"Username"),(0,s._)("th",null,"Full Name"),(0,s._)("th",null,"Email")])],-1),jn=(0,s._)("h2",null,"Donations",-1),zn={class:"button-container"},Nn={class:"table-responsive"},En={class:"table"},On=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"ID"),(0,s._)("th",null,"Amount"),(0,s._)("th",null,"Donor Name"),(0,s._)("th",null,"Mosque"),(0,s._)("th",null,"Campaign")])],-1);function xn(e,n,t,a,o,r){const i=(0,s.up)("ManageCampaigns"),u=(0,s.up)("ManageAnnouncements");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",Mn,[Un,(0,s._)("p",null," You are administrator for the following mosque: "+(0,l.zw)(a.user.chosenMosqueName)+". ",1),In,(0,s._)("p",null," The following users are registered to make donations to "+(0,l.zw)(a.user.chosenMosqueName)+". ",1),(0,s._)("div",Sn,[(0,s._)("table",An,[Ln,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.users,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e._id},[(0,s._)("td",null,(0,l.zw)(e._id),1),(0,s._)("td",null,(0,l.zw)(e.username),1),(0,s._)("td",null,(0,l.zw)(e.name),1),(0,s._)("td",null,(0,l.zw)(e.email),1)])))),128))])])]),jn,(0,s._)("p",null,"The following donations have been made to "+(0,l.zw)(a.user.chosenMosqueName),1),(0,s._)("div",zn,[(0,s._)("button",{class:"btn btn-success",onClick:n[0]||(n[0]=e=>r.generateDonationsCSV())}," Generate CSV Report "),(0,s._)("button",{class:"btn btn-danger",onClick:n[1]||(n[1]=e=>r.generateDonationsPDF())}," Generate PDF Report ")]),(0,s._)("div",Nn,[(0,s._)("table",En,[On,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.donations,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e._id},[(0,s._)("td",null,(0,l.zw)(e._id),1),(0,s._)("td",null,(0,l.zw)(e.amount),1),(0,s._)("td",null,(0,l.zw)(e.donor.name),1),(0,s._)("td",null,(0,l.zw)(e.mosque.name),1),(0,s._)("td",null,(0,l.zw)(e.campaign?.name||"No Campaign"),1)])))),128))])])])]),(0,s.Wm)(i),(0,s.Wm)(u)],64)}const Tn=e=>((0,s.dD)("data-v-255fed32"),e=e(),(0,s.Cn)(),e),Pn=Tn((()=>(0,s._)("h2",null,"Campaigns",-1))),Rn=Tn((()=>(0,s._)("h3",null,"Create Campaign",-1))),Vn=Tn((()=>(0,s._)("h3",null,"View Campaigns",-1))),$n=Tn((()=>(0,s._)("p",null,"Below are the campaigns for the mosque you are administrating",-1))),Yn={class:"campaign-list"},Hn={class:"card-body"},Fn={class:"card-title"},Zn={class:"card-text"},Kn={class:"card-text status"},Gn=Tn((()=>(0,s._)("br",null,null,-1))),Jn={key:0},Wn=Tn((()=>(0,s._)("br",null,null,-1))),Bn=Tn((()=>(0,s._)("br",null,null,-1))),Qn=Tn((()=>(0,s._)("br",null,null,-1))),Xn=Tn((()=>(0,s._)("br",null,null,-1))),et=["onClick"],nt=["onClick"],tt=Tn((()=>(0,s._)("br",null,null,-1))),at=["onClick"],ot=["onClick"],st={class:"modal fade",id:"updateCampaignModal",tabindex:"-1","aria-labelledby":"updateCampaignModalLabel","aria-hidden":"true"},lt={class:"modal-dialog"},rt={class:"modal-content"},it=Tn((()=>(0,s._)("div",{class:"modal-header"},[(0,s._)("h1",{class:"modal-title fs-5",id:"updateCampaignModalLabel"}," Update campaign information "),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),ut={class:"modal-body"},dt={class:"mb-3"},ct=Tn((()=>(0,s._)("label",{for:"name",class:"form-label"},"Name",-1))),mt={class:"mb-3"},ht=Tn((()=>(0,s._)("label",{for:"description",class:"form-label"},"Description",-1))),pt={class:"mb-3"},gt=Tn((()=>(0,s._)("label",{for:"goal",class:"form-label"},"Goal",-1))),bt={class:"mb-3"},_t=Tn((()=>(0,s._)("label",{for:"startDate",class:"form-label"},"Start Date",-1))),ft={class:"mb-3"},wt=Tn((()=>(0,s._)("label",{for:"endDate",class:"form-label"},"End Date",-1))),yt=Tn((()=>(0,s._)("button",{class:"btn btn-primary",type:"submit"}," Update ",-1)));function vt(e,n,t,o,r,i){return(0,s.wg)(),(0,s.iD)(s.HY,null,[Pn,Rn,(0,s._)("p",null,[(0,s.Uk)(" To create a campaign, "),(0,s._)("button",{class:"btn btn-primary",onClick:n[0]||(n[0]=e=>i.addCampaign())},"Click here")]),Vn,$n,(0,s._)("div",Yn,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.campaigns,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"card",key:e._id},[(0,s._)("div",Hn,[(0,s._)("h5",Fn,(0,l.zw)(e.name),1),(0,s._)("p",Zn,(0,l.zw)(e.description),1),(0,s._)("p",Kn,[(0,s.Uk)(" Created By: "+(0,l.zw)(e.createdBy.name)+" ",1),Gn,(0,s.Uk)(" Donors: "),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.donors,((n,t)=>((0,s.wg)(),(0,s.iD)("span",{key:t},[(0,s.Uk)((0,l.zw)(n.name)+" ",1),t!==e.donors.length-1?((0,s.wg)(),(0,s.iD)("span",Jn,", ")):(0,s.kq)("",!0)])))),128)),Wn,(0,s.Uk)(" Goal: "+(0,l.zw)(e.goal)+" ",1),Bn,(0,s.Uk)(" Raised: "+(0,l.zw)(e.raisedAmount)+" ",1),Qn,(0,s.Uk)(" Start Date: "+(0,l.zw)(i.formatDate(e.startDate))+" ",1),Xn,(0,s.Uk)(" End Date: "+(0,l.zw)(i.formatDate(e.endDate)),1)]),(0,s._)("button",{class:"btn btn-primary",onClick:n[1]||(n[1]=e=>i.refreshDonations())}," Refresh "),(0,s._)("button",{class:"btn btn-warning","data-bs-toggle":"modal","data-bs-target":"#updateCampaignModal",onClick:n=>i.openModal(e)}," Update ",8,et),(0,s._)("button",{class:"btn btn-danger",onClick:n=>i.deleteCampaign(e)}," Delete ",8,nt),tt,(0,s._)("button",{class:"btn btn-success",onClick:n=>i.generateCampaignsCSV(e)}," Generate .csv report ",8,at),(0,s._)("button",{class:"btn btn-danger",onClick:n=>i.generateCampaignsPDF(e)}," Generate .pdf report ",8,ot)]),(0,s._)("div",st,[(0,s._)("div",lt,[(0,s._)("div",rt,[it,(0,s._)("div",ut,[(0,s._)("form",{onSubmit:n[7]||(n[7]=(0,a.iM)((e=>i.update(r.formData)),["prevent"])),class:"form"},[(0,s._)("div",dt,[ct,(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":n[2]||(n[2]=e=>r.formData.name=e),type:"text",required:""},null,512),[[a.nr,r.formData.name]])]),(0,s._)("div",mt,[ht,(0,s.wy)((0,s._)("textarea",{class:"form-control","onUpdate:modelValue":n[3]||(n[3]=e=>r.formData.description=e),type:"text",required:""},null,512),[[a.nr,r.formData.description]])]),(0,s._)("div",pt,[gt,(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":n[4]||(n[4]=e=>r.formData.goal=e),type:"number",required:""},null,512),[[a.nr,r.formData.goal]])]),(0,s._)("div",bt,[_t,(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":n[5]||(n[5]=e=>r.formData.startDate=e),type:"date",required:""},null,512),[[a.nr,r.formData.startDate]])]),(0,s._)("div",ft,[wt,(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":n[6]||(n[6]=e=>r.formData.endDate=e),type:"date",required:""},null,512),[[a.nr,r.formData.endDate]])]),yt],32)])])])])])))),128))])],64)}var Dt={name:"ManageCampaigns",setup(){const e=Xo();return{user:e}},data(){return{campaigns:[],formData:{_id:"",name:"",description:"",mosque:"",goal:0,startDate:"",endDate:""}}},created(){this.retrieveCampaigns()},methods:{retrieveCampaigns(){fetch(`/api/campaigns/${this.user.chosenMosqueId}`).then((e=>{if(e.ok)return e.json();throw new Error(e.status)})).then((e=>{this.campaigns=e,this.campaigns.forEach((e=>{e.startDate=e.startDate.substring(0,10),e.endDate=e.endDate.substring(0,10)}))})).catch((e=>console.log(e)))},addCampaign(){this.$router.push("/addCampaign")},formatDate(e){return new Date(e).toLocaleDateString()},refreshDonations(){this.retrieveCampaigns()},update(e){fetch(`/api/campaigns/${e._id}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.name,description:e.description,mosque:e.mosque,goal:e.goal,startDate:e.startDate,endDate:e.endDate})}).then((e=>{if(!e.ok)throw e;return e.json()})).then((e=>{if(!e.success)throw new Error(e.message||"Failed to update campaign");alert("Campaign updated successfully!"),this.campaigns=e.campaigns,this.campaigns.forEach((e=>{e.startDate=e.startDate.substring(0,10),e.endDate=e.endDate.substring(0,10)})),this.retrieveCampaigns(),document.querySelector(".btn-close").click()})).catch((e=>{alert(`uh oh, theres a problem\n${e.status}: ${e.statusText}`)}))},deleteCampaign(e){fetch(`/api/campaigns/${e._id}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{e.success?(alert(e.message),this.retrieveCampaigns()):alert(e.error)})).catch((e=>{alert(e.toString())}))},async generateCampaignsCSV(e){await fetch(`/api/reports/campaigns/csv/${e._id}`).then((e=>e.blob())).then((e=>{const n=window.URL.createObjectURL(e),t=document.createElement("a");t.href=n,t.download="campaign.csv",t.click(),window.URL.revokeObjectURL(n)}))},async generateCampaignsPDF(e){await fetch(`/api/reports/campaigns/pdf/${e._id}`).then((e=>e.blob())).then((e=>{const n=window.URL.createObjectURL(e),t=document.createElement("a");t.href=n,t.download="campaign.pdf",t.click(),window.URL.revokeObjectURL(n)}))},openModal(e){this.formData=e}}};const kt=(0,L.Z)(Dt,[["render",vt],["__scopeId","data-v-255fed32"]]);var qt=kt;const Ct=e=>((0,s.dD)("data-v-c2a62924"),e=e(),(0,s.Cn)(),e),Mt=Ct((()=>(0,s._)("h2",null,"Announcements",-1))),Ut=Ct((()=>(0,s._)("h3",null,"Create Announcement",-1))),It=Ct((()=>(0,s._)("h3",null,"View Announcements",-1))),St=Ct((()=>(0,s._)("p",null,"Below are the announcements for the mosque you are administrating",-1))),At={class:"announcement-list"},Lt={class:"card mb-3"},jt={class:"card-body"},zt={class:"card-title"},Nt={class:"card-text"},Et={class:"card-text"},Ot=["onClick"],xt=["onClick"],Tt={class:"modal fade",id:"updateAnnouncementModal",tabindex:"-1","aria-labelledby":"updateAnnouncementModalLabel","aria-hidden":"true"},Pt={class:"modal-dialog"},Rt={class:"modal-content"},Vt=Ct((()=>(0,s._)("div",{class:"modal-header"},[(0,s._)("h1",{class:"modal-title fs-5",id:"updateAnnouncementModalLabel"}," Update announcement "),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),$t={class:"modal-body"},Yt={class:"mb-3"},Ht=Ct((()=>(0,s._)("label",{for:"description",class:"form-label"},"Title",-1))),Ft={class:"mb-3"},Zt=Ct((()=>(0,s._)("label",{for:"title",class:"form-label"},"Content",-1))),Kt=Ct((()=>(0,s._)("button",{class:"btn btn-primary",type:"submit"}," Update ",-1)));function Gt(e,n,t,o,r,i){return(0,s.wg)(),(0,s.iD)(s.HY,null,[Mt,Ut,(0,s._)("p",null,[(0,s.Uk)(" To create an announcement, "),(0,s._)("button",{class:"btn btn-primary",onClick:n[0]||(n[0]=e=>i.addAnnouncement())}," Click here ")]),It,St,(0,s._)("div",At,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.announcements,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e._id},[(0,s._)("div",Lt,[(0,s._)("div",jt,[(0,s._)("h3",zt,(0,l.zw)(e.title),1),(0,s._)("p",Nt,(0,l.zw)(i.formatDate(e.createdAt))+" by "+(0,l.zw)(e.createdBy.name),1),(0,s._)("p",Et,(0,l.zw)(e.content),1),(0,s._)("button",{onClick:n=>i.showUpdateModal(e),class:"btn btn-warning","data-bs-toggle":"modal","data-bs-target":"#updateAnnouncementModal"}," Update ",8,Ot),(0,s._)("button",{class:"btn btn-danger",onClick:n=>i.deleteAnnouncement(e)}," Delete ",8,xt)])]),(0,s._)("div",Tt,[(0,s._)("div",Pt,[(0,s._)("div",Rt,[Vt,(0,s._)("div",$t,[(0,s._)("form",{onSubmit:n[3]||(n[3]=(0,a.iM)((e=>i.updateAnnouncement(r.formData)),["prevent"])),class:"form"},[(0,s._)("div",Yt,[Ht,(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":n[1]||(n[1]=e=>r.formData.title=e),type:"text",required:""},null,512),[[a.nr,r.formData.title]])]),(0,s._)("div",Ft,[Zt,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":n[2]||(n[2]=e=>r.formData.content=e),rows:"10",cols:"30",placeholder:"Content",required:""},null,512),[[a.nr,r.formData.content]])]),Kt],32)])])])])])))),128))])],64)}var Jt={setup(){const e=Xo();return{user:e}},data(){return{announcements:[],formData:{_id:0,title:"",content:""}}},created(){this.getAnnouncements()},methods:{async getAnnouncements(){await fetch(`/api/announcements/${this.user.chosenMosqueId}`).then((e=>{if(e.ok)return e.json();throw new Error(e.status)})).then((e=>{e.success&&(this.announcements=e.announcements)})).catch((e=>{console.error(e)}))},addAnnouncement(){this.$router.push("/addAnnouncement")},async updateAnnouncement(e){await fetch(`/api/announcements/${e._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e.title,content:e.content})}).then((e=>{if(!e.ok)throw e;return e.json()})).then((e=>{if(!e.success)throw new Error(e.message||"Failed to update campaign");alert("Announcement updated successfully!"),this.getAnnouncements(),document.querySelector(".btn-close").click()})).catch((e=>{alert(`uh oh, theres a problem\n${e.status}: ${e.statusText}`)}))},async deleteAnnouncement(e){await fetch(`/api/announcements/${e._id}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}}).then((e=>{if(e.ok)return e.json();throw e})).then((e=>{e.success&&(alert("Announcement deleted successfully"),this.getAnnouncements())})).catch((e=>{console.log(e)}))},showUpdateModal(e){this.formData=e},formatDate(e){const n={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(e).toLocaleString("en-US",n)}}};const Wt=(0,L.Z)(Jt,[["render",Gt],["__scopeId","data-v-c2a62924"]]);var Bt=Wt,Qt={name:"AdminDashboard",components:{ManageCampaigns:qt,ManageAnnouncements:Bt},setup(){const e=Xo();return{user:e}},data(){return{users:[],mosque:[],donations:[]}},created(){fetch(`/api/users/${this.user.chosenMosqueId}`).then((e=>{if(e.ok)return e.json();throw new Error(e.status)})).then((e=>{this.users=e})).catch((e=>{console.error(e)})),fetch(`/api/mosqueAllDonations/${this.user.chosenMosqueId}`).then((e=>{if(e.ok)return e.json();throw new Error(e.status)})).then((e=>{this.donations=e})).catch((e=>{console.error(e)}))},methods:{async generateDonationsCSV(){await fetch(`/api/reports/donations/csv/${this.user.chosenMosqueId}`).then((e=>e.blob())).then((e=>{const n=window.URL.createObjectURL(e),t=document.createElement("a");t.href=n,t.download="donations.csv",t.click(),window.URL.revokeObjectURL(n)}))},async generateDonationsPDF(){await fetch(`/api/reports/donations/pdf/${this.user.chosenMosqueId}`).then((e=>e.blob())).then((e=>{const n=window.URL.createObjectURL(e),t=document.createElement("a");t.href=n,t.download="donations.pdf",t.click(),window.URL.revokeObjectURL(n)}))}}};const Xt=(0,L.Z)(Qt,[["render",xn]]);var ea=Xt;const na=e=>((0,s.dD)("data-v-6e2d136e"),e=e(),(0,s.Cn)(),e),ta={key:0},aa=na((()=>(0,s._)("h1",null,"View Campaigns",-1))),oa={key:0},sa={class:"campaign-list"},la={class:"card-body"},ra={class:"card-title"},ia={class:"card-text"},ua={class:"card-text status"},da=na((()=>(0,s._)("br",null,null,-1))),ca=na((()=>(0,s._)("br",null,null,-1))),ma=na((()=>(0,s._)("br",null,null,-1))),ha={key:1},pa=na((()=>(0,s._)("h1",null,"Uh Oh!",-1))),ga=na((()=>(0,s._)("p",null,"You don't have a chosen mosque!",-1))),ba=na((()=>(0,s._)("p",null,"Go and select a chosen mosque from the profile page.",-1))),_a=[pa,ga,ba];function fa(e,n,t,a,o,r){return null!=a.user.chosenMosqueName?((0,s.wg)(),(0,s.iD)("div",ta,[aa,0==o.campaignList.length?((0,s.wg)(),(0,s.iD)("h2",oa,"Wow... so empty...")):(0,s.kq)("",!0),(0,s._)("div",sa,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.campaignList,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"card",key:e._id},[(0,s._)("div",la,[(0,s._)("h5",ra,(0,l.zw)(e.name),1),(0,s._)("p",ia,(0,l.zw)(e.description),1),(0,s._)("p",ua,[(0,s.Uk)(" Goal: "+(0,l.zw)(e.goal)+" ",1),da,(0,s.Uk)(" Raised: "+(0,l.zw)(e.raisedAmount)+" ",1),ca,(0,s.Uk)(" Start Date: "+(0,l.zw)(r.formatDate(e.startDate))+" ",1),ma,(0,s.Uk)(" End Date: "+(0,l.zw)(r.formatDate(e.endDate)),1)]),(0,s._)("button",{onClick:n[0]||(n[0]=e=>r.redirect()),class:"btn btn-primary"},"Donate")])])))),128))])])):((0,s.wg)(),(0,s.iD)("div",ha,_a))}var wa={setup(){const e=Xo();return{user:e}},data(){return{campaignList:[]}},created(){fetch(`/api/campaigns/${this.user.chosenMosqueId}`).then((function(e){return e.json()})).then(function(e){this.campaignList=e}.bind(this))},methods:{redirect(){this.$router.push("/makeDonation")},formatDate(e){return new Date(e).toLocaleDateString()}}};const ya=(0,L.Z)(wa,[["render",fa],["__scopeId","data-v-6e2d136e"]]);var va=ya;const Da=(0,s._)("h1",null,"Uh Oh",-1),ka=(0,s._)("h2",null,"Looks like that page doesn't exist!",-1),qa=(0,s._)("p",null,"Navigate back to home to try again",-1);function Ca(e,n){return(0,s.wg)(),(0,s.iD)(s.HY,null,[Da,ka,qa],64)}const Ma={},Ua=(0,L.Z)(Ma,[["render",Ca]]);var Ia=Ua;const Sa=(0,s._)("h1",null,"Woops!",-1),Aa=(0,s._)("h2",null,"Looks like you don't have permission to access that page!",-1),La=(0,s._)("p",null,"Navigate back to home to try again",-1);function ja(e,n){return(0,s.wg)(),(0,s.iD)(s.HY,null,[Sa,Aa,La],64)}const za={},Na=(0,L.Z)(za,[["render",ja]]);var Ea=Na;const Oa=(0,s._)("h1",null,"Add Campaign",-1),xa={class:"mb-3"},Ta=(0,s._)("label",{for:"name",class:"form-label"},"Name",-1),Pa={class:"mb-3"},Ra=(0,s._)("label",{for:"description",class:"form-label"},"Descrption",-1),Va={class:"mb-3"},$a=(0,s._)("label",{for:"goal",class:"form-label"},"Goal",-1),Ya={class:"mb-3"},Ha=(0,s._)("label",{for:"startDate",class:"form-label"},"Start Date",-1),Fa={class:"mb-3"},Za=(0,s._)("label",{for:"endDate",class:"form-label"},"End Date",-1),Ka=(0,s._)("button",{type:"submit",class:"btn btn-primary"},"Submit",-1);function Ga(e,n,t,o,l,r){return(0,s.wg)(),(0,s.iD)(s.HY,null,[Oa,(0,s._)("form",{onSubmit:n[5]||(n[5]=(0,a.iM)((e=>r.addCampaign()),["prevent"])),class:"form"},[(0,s._)("div",xa,[Ta,(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":n[0]||(n[0]=e=>l.name=e),type:"text",required:""},null,512),[[a.nr,l.name]])]),(0,s._)("div",Pa,[Ra,(0,s.wy)((0,s._)("textarea",{class:"form-control",name:"description",id:"description","onUpdate:modelValue":n[1]||(n[1]=e=>l.description=e),type:"text"},null,512),[[a.nr,l.description]])]),(0,s._)("div",Va,[$a,(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":n[2]||(n[2]=e=>l.goal=e),type:"number",required:""},null,512),[[a.nr,l.goal]])]),(0,s._)("div",Ya,[Ha,(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":n[3]||(n[3]=e=>l.startDate=e),type:"date",required:""},null,512),[[a.nr,l.startDate]])]),(0,s._)("div",Fa,[Za,(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":n[4]||(n[4]=e=>l.endDate=e),type:"date",required:""},null,512),[[a.nr,l.endDate]])]),Ka],32)],64)}var Ja={name:"ManageCampaigns",setup(){const e=Xo();return{user:e}},data(){return{name:"",description:"",goal:"",startDate:"",endDate:""}},methods:{addCampaign(){let e={name:this.name,mosque:this.user.chosenMosqueId,description:this.description,goal:this.goal,raisedAmount:0,startDate:this.startDate,endDate:this.endDate,createdBy:this.user._id,donors:[]};fetch("/api/campaigns",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{e.success&&(alert("Campaign added successfully."),this.$router.push("/campaigns"))})).catch((e=>console.log(e)))}}};const Wa=(0,L.Z)(Ja,[["render",Ga]]);var Ba=Wa;const Qa=e=>((0,s.dD)("data-v-e793aa28"),e=e(),(0,s.Cn)(),e),Xa={key:0},eo=Qa((()=>(0,s._)("h1",null,"Announcements",-1))),no={key:0},to={class:"announcements-list"},ao={class:"card mb-3"},oo={class:"card-body"},so={class:"card-title"},lo={class:"card-text"},ro={class:"card-text"},io=Qa((()=>(0,s._)("h5",null,"Replies",-1))),uo={class:"mt-3"},co=Qa((()=>(0,s._)("h4",null,"Reply to this announcement here:",-1))),mo={key:1},ho=Qa((()=>(0,s._)("h1",null,"Uh Oh!",-1))),po=Qa((()=>(0,s._)("p",null,"You don't have a chosen mosque!",-1))),go=Qa((()=>(0,s._)("p",null,"Go and select a chosen mosque from the profile page.",-1))),bo=[ho,po,go];function _o(e,n,t,a,o,r){const i=(0,s.up)("ReplyList"),u=(0,s.up)("ReplyForm");return null!=a.user.chosenMosqueName?((0,s.wg)(),(0,s.iD)("div",Xa,[eo,0==o.announcements.length?((0,s.wg)(),(0,s.iD)("h2",no,"Wow... so empty....")):(0,s.kq)("",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.announcements,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e._id},[(0,s._)("div",to,[(0,s._)("div",ao,[(0,s._)("div",oo,[(0,s._)("h3",so,(0,l.zw)(e.title),1),(0,s._)("p",lo,(0,l.zw)(r.formatDate(e.createdAt))+" by "+(0,l.zw)(e.createdBy.name),1),(0,s._)("p",ro,(0,l.zw)(e.content),1),io,(0,s._)("div",uo,[(0,s.Wm)(i,{replies:e.replies,announcementId:e._id},null,8,["replies","announcementId"]),co,(0,s.Wm)(u,{announcementId:e._id,onReplySubmitted:r.handleReplySubmitted},null,8,["announcementId","onReplySubmitted"])])])])])])))),128))])):((0,s.wg)(),(0,s.iD)("div",mo,bo))}const fo={key:0,style:{"list-style-type":"none"}};function wo(e,n,t,a,o,r){return t.replies.length>0?((0,s.wg)(),(0,s.iD)("ul",fo,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.replies,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e._id},[(0,s._)("p",null,(0,l.zw)(e.createdBy.name)+" replied: "+(0,l.zw)(e.content),1)])))),128))])):(0,s.kq)("",!0)}var yo={props:["replies","announcementId"]};const vo=(0,L.Z)(yo,[["render",wo]]);var Do=vo;const ko=e=>((0,s.dD)("data-v-8a440bcc"),e=e(),(0,s.Cn)(),e),qo={class:"reply-form"},Co=ko((()=>(0,s._)("button",{class:"btn btn-primary",type:"submit"},"Reply",-1)));function Mo(e,n,t,o,l,r){return(0,s.wg)(),(0,s.iD)("div",qo,[(0,s._)("form",{onSubmit:n[1]||(n[1]=(0,a.iM)((e=>r.submitReply()),["prevent"]))},[(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":n[0]||(n[0]=e=>l.replyContent=e),rows:"3",cols:"30"},null,512),[[a.nr,l.replyContent]]),Co],32)])}var Uo={props:["announcementId","parentReplyId"],data(){return{replyContent:""}},methods:{submitReply(){fetch(`/api/replies/${this.announcementId}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:this.replyContent})}).then((e=>e.json())).catch((e=>{console.log("Error:"+e)})).then((e=>{e.success&&(this.$emit("replySubmitted"),this.replyContent="")}))}}};const Io=(0,L.Z)(Uo,[["render",Mo],["__scopeId","data-v-8a440bcc"]]);var So=Io,Ao={setup(){const e=Xo();return{user:e}},components:{ReplyList:Do,ReplyForm:So},data(){return{announcements:[]}},created(){this.getAnnouncements()},methods:{getAnnouncements(){fetch(`/api/announcements/${this.user.chosenMosqueId}`).then((e=>{if(e.ok)return e.json();throw new Error(e.status)})).then((e=>{e.success&&(this.announcements=e.announcements)})).catch((e=>{console.error(e)}))},formatDate(e){const n={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(e).toLocaleString("en-US",n)},handleReplySubmitted(){this.getAnnouncements()}}};const Lo=(0,L.Z)(Ao,[["render",_o],["__scopeId","data-v-e793aa28"]]);var jo=Lo;const zo=(0,s._)("h1",null,"Add Announcement",-1),No={class:"mb-3"},Eo=(0,s._)("label",{for:"description",class:"form-label"},"Title",-1),Oo={class:"mb-3"},xo=(0,s._)("label",{for:"title",class:"form-label"},"Content",-1),To=(0,s._)("button",{class:"btn btn-primary",type:"submit"},"Update",-1);function Po(e,n,t,o,l,r){return(0,s.wg)(),(0,s.iD)(s.HY,null,[zo,(0,s._)("form",{onSubmit:n[2]||(n[2]=(0,a.iM)((e=>r.addAnnouncement(l.formData)),["prevent"])),class:"form"},[(0,s._)("div",No,[Eo,(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":n[0]||(n[0]=e=>l.formData.title=e),type:"text",required:""},null,512),[[a.nr,l.formData.title]])]),(0,s._)("div",Oo,[xo,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":n[1]||(n[1]=e=>l.formData.content=e),rows:"10",cols:"30",placeholder:"Content",required:""},null,512),[[a.nr,l.formData.content]])]),To],32)],64)}var Ro={name:"ManageCampaigns",setup(){const e=Xo();return{user:e}},data(){return{formData:{title:"",content:"",mosque:this.user.chosenMosqueId}}},methods:{addAnnouncement(){fetch("/api/announcements",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.formData)}).then((e=>e.json())).then((e=>{e.success&&(alert("Announcement added successfully"),this.$router.push("/announcements"))})).catch((e=>console.log(e)))}}};const Vo=(0,L.Z)(Ro,[["render",Po]]);var $o=Vo;const Yo=e=>((0,s.dD)("data-v-7f26ad71"),e=e(),(0,s.Cn)(),e),Ho=Yo((()=>(0,s._)("h1",null,"Logged out successfully!",-1)));function Fo(e,n,t,a,o,l){return(0,s.wg)(),(0,s.iD)(s.HY,null,[Ho,(0,s._)("button",{class:"btn btn-primary",onClick:n[0]||(n[0]=e=>l.redirectHome())}," Click here to go home ")],64)}var Zo={name:"LogOutPage",data(){const e=Xo();return{user:e}},setup(){function e(){this.user.logout()}return{logout:e}},mounted(){this.logout()},methods:{redirectHome(){this.$router.push("/")}}};const Ko=(0,L.Z)(Zo,[["render",Fo],["__scopeId","data-v-7f26ad71"]]);var Go=Ko;const Jo=[{path:"/",name:"home",component:Q},{path:"/makeDonation",name:"donationForm",component:z,beforeEnter:(e,n,t)=>{const a=Xo();a.isLoggedIn?t():t({name:"denied"})}},{path:"/profile",name:"profile",component:sn,beforeEnter:(e,n,t)=>{const a=Xo();a.isLoggedIn?t():t({name:"denied"})}},{path:"/mosquesInfo",name:"mosquesInfo",component:Cn,beforeEnter:(e,n,t)=>{const a=Xo();a.isLoggedIn?t():t({name:"denied"})}},{path:"/campaigns",name:"campaigns",component:va,beforeEnter:(e,n,t)=>{const a=Xo();a.isLoggedIn?t():t({name:"denied"})}},{path:"/announcements",name:"announcements",component:jo,beforeEnter:(e,n,t)=>{const a=Xo();a.isLoggedIn?t():t({name:"denied"})}},{path:"/addCampaign",name:"addCampaign",component:Ba,beforeEnter:(e,n,t)=>{const a=Xo();a.isAdmin?t():t({name:"denied"})}},{path:"/addAnnouncement",name:"addAnnouncement",component:$o,beforeEnter:(e,n,t)=>{const a=Xo();a.isAdmin?t():t({name:"denied"})}},{path:"/adminDashboard",name:"adminDashboard",component:ea,beforeEnter:(e,n,t)=>{const a=Xo();a.isAdmin?t():t({name:"denied"})}},{path:"/register",name:"register",component:ye,beforeEnter:(e,n,t)=>{const a=Xo();a.isLoggedIn?t({name:"home"}):t()}},{path:"/login",name:"login",component:je,beforeEnter:(e,n,t)=>{const a=Xo();a.isLoggedIn?t({name:"home"}):t()}},{path:"/denied",name:"denied",component:Ea},{path:"/logout",name:"logout",component:Go},{path:"/:catchAll(.*)",component:Ia}],Wo=(0,p.p7)({history:(0,p.PO)("/"),routes:Jo});var Bo=Wo;const Qo={_id:0,username:"",name:"",email:"",password:"",isAdmin:!1,chosenMosqueId:"",chosenMosqueName:"",isLoggedIn:!1},Xo=(0,o.Q_)("user",{state:()=>{const e=localStorage.getItem("user");return e?JSON.parse(e):Qo},actions:{async loggedIn(){try{const e=await fetch("/api/loggedIn",{method:"GET",credentials:"include"}),n=await e.json();n.success?(this._id=n._id,this.isLoggedIn=!0,this.username=n.username,this.name=n.name,this.email=n.email,this.isAdmin=n.isAdmin,this.chosenMosqueId=n.chosenMosqueId,this.chosenMosqueName=n.chosenMosqueName,localStorage.setItem("user",JSON.stringify(this.$state))):(this.isLoggedIn=!1,localStorage.removeItem("user"))}catch(e){console.log(e)}},async logout(){const e=await fetch("/api/logout",{method:"GET",credentials:"include"}),n=await e.json();n.success&&(this._id=0,this.username="",this.name="",this.email="",this.password="",this.isLoggedIn=!1,this.isAdmin=!1,this.chosenMosqueId=null,this.chosenMosqueName="",localStorage.clear())},async login(){try{const e=await fetch("/api/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username,password:this.password})});if(401===e.status)alert("Wrong Username or Password"),Bo.push("/login");else{const n=await e.json();n.success&&(alert("Login successful"),this._id=n._id,this.username=n.username,this.name=n.name,this.email=n.email,this.isAdmin=n.isAdmin,this.chosenMosqueId=n.chosenMosqueId,this.chosenMosqueName=n.chosenMosqueName,this.loggedIn(),Bo.push("/"))}}catch(e){console.log(e)}}}});var es={setup(){const e=Xo(),n=(0,h.iH)(!1),t=(0,h.iH)(""),a=()=>{n.value=!n.value},o=()=>{n.value=!1},l=()=>{t.value="dark"===t.value?"light":"dark",localStorage.setItem("theme",t.value),r()},r=()=>{const e="dark"===t.value?"dark":"light";document.body.setAttribute("data-bs-theme",e)};return(0,s.bv)((async()=>{await e.loggedIn(),t.value=localStorage.getItem("theme")||"dark",r()})),{user:e,isNavbarOpen:n,theme:t,toggleNavbar:a,closeNavbar:o,toggleTheme:l}}};const ns=(0,L.Z)(es,[["render",m]]);var ts=ns;t(2166);const as=(0,o.WB)();(0,a.ri)(ts).use(Bo).use(as).mount("#app");const os=Xo();(0,s.YP)(os,(e=>{localStorage.setItem("user",JSON.stringify(e))}),{deep:!0})}},n={};function t(a){var o=n[a];if(void 0!==o)return o.exports;var s=n[a]={exports:{}};return e[a].call(s.exports,s,s.exports,t),s.exports}t.m=e,function(){var e=[];t.O=function(n,a,o,s){if(!a){var l=1/0;for(d=0;d<e.length;d++){a=e[d][0],o=e[d][1],s=e[d][2];for(var r=!0,i=0;i<a.length;i++)(!1&s||l>=s)&&Object.keys(t.O).every((function(e){return t.O[e](a[i])}))?a.splice(i--,1):(r=!1,s<l&&(l=s));if(r){e.splice(d--,1);var u=o();void 0!==u&&(n=u)}}return n}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[a,o,s]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var a in n)t.o(n,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};t.O.j=function(n){return 0===e[n]};var n=function(n,a){var o,s,l=a[0],r=a[1],i=a[2],u=0;if(l.some((function(n){return 0!==e[n]}))){for(o in r)t.o(r,o)&&(t.m[o]=r[o]);if(i)var d=i(t)}for(n&&n(a);u<l.length;u++)s=l[u],t.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return t.O(d)},a=self["webpackChunkfundmosque"]=self["webpackChunkfundmosque"]||[];a.forEach(n.bind(null,0)),a.push=n.bind(null,a.push.bind(a))}();var a=t.O(void 0,[998],(function(){return t(5250)}));a=t.O(a)})();
//# sourceMappingURL=app.44048422.js.map